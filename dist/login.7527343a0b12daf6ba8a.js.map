{"version":3,"file":"login.7527343a0b12daf6ba8a.js","mappings":"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","sources":["webpack://book-site/./src/js/login.js"],"sourcesContent":["const loginForm = document.querySelector('.loginForm')\nconst warning = document.querySelector('.loginForm__warning')\n\n\nlet users = {}\nlet loginValid = false\n\nif (loginForm) {\n    const fields = ['username', 'password'];\n\n    loginForm.addEventListener(\"submit\", (e) => {\n        e.preventDefault()\n\n        fields.forEach((field) => {\n            const inputs = document.querySelector(`#${field}`)\n            checkInputs(inputs)\n        })\n    })\n\n    function checkInputs(field) {\n        if (field.value.trim() === '') {\n            setStatus(field, \"error-message\", \"error\");\n            return false\n        } else {\n            setStatus(field, \"error-message\", \"success\");\n            loginValid = true\n        }\n    }\n}\n\nfunction setStatus(field, message, status) {\n    const errorMessage = field.parentElement.querySelector(\".loginForm__error-message\")\n    if (status === \"error\") {\n        errorMessage.classList.add(message)\n        field.classList.add(\"input-error\")\n    }\n\n    if (status === \"success\") {\n        errorMessage.classList.remove(message)\n        field.classList.remove(\"input-error\")\n        users = {...users, [field.name]: field.value}\n    }\n\n    if (loginValid === true){\n        setValidate(users)\n    }\n}\n\nconst setValidate = async (users) => {\n    try {\n\n        const response = await fetch(\"http://localhost:1717/login\", {\n            method: \"POST\",\n            headers: {\n                \"Content-type\": \"application/json; charset=UTF-8\"\n            },\n            body: JSON.stringify(users),\n        });\n\n        if (response.ok === false){\n            warning.classList.add('warning')\n        }else{\n\n            setTimeout(() => {\n                location.assign('/books.html')\n            },200)\n        }\n        const userResult = await response.json()\n\n        const personalUser = userResult.data\n        const personalToken = userResult.token\n\n        localStorage.setItem(\"user\", personalUser.username)\n        localStorage.setItem(\"token\", personalToken)\n\n    } catch (error) {\n        console.log(\"Couldn't Fetch\", error.message)\n    }\n}"],"names":["loginForm","document","querySelector","warning","users","loginValid","fields","addEventListener","e","preventDefault","forEach","field","inputs","checkInputs","value","trim","setStatus","message","status","errorMessage","parentElement","classList","add","remove","name","setValidate","response","fetch","method","headers","body","JSON","stringify","ok","setTimeout","location","assign","userResult","json","personalUser","data","personalToken","token","localStorage","setItem","username","error","console","log"],"sourceRoot":""}